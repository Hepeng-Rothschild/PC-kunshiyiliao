const $ = require('jquery') 
export const ssoHeart = (function() {
  var c = null,
    b = null,
    a = true;
  return {
    init: function(e, d, f) {
      if (!e) { return }
      if (!/^(http|http(s))/i.test(e)) { return } f = f || 60000;
      d = d || "get";
      var g = this;
      $(document).bind("keydown mousemove", function() {
      	console.log('init')
        if (a) {
          c = new Date().getTime();
          a = false
        }
        b = new Date().getTime();
        if (b - c > f) {
          c = null;
          b = null;
          g.load(e, d, f);
          a = true
        }
      })
    },
    load: function(d, f, e) {
      $.ajax({ 
      	url: d + "/heart", 
      	timeout: 3000, 
      	dataType: "jsonp", 
      	type: f, 
      	success: function(g) {}, 
      	error: function(g) { console.log("error " + g) } 
      })
    }
  }
})();
